<!DOCTYPE html>

<html>
    <head>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.7.3/d3.min.js" charset="utf-8"></script>
        <title>D3 Intro</title>

        <style>
         .graph div {
             font: 10px sans-serif;
             text-align: right;
             padding: 3px;
             margin: 1px;
             color: white;
         }
        </style>

    </head>

    <body>
        <h2>Dyamic Chart</h2>
        <br>
        <div class="graph" id="deficit-graph">
        </div>
        <br>

        <div class="graph" id="gdp-graph">
        </div>
	<br>
        <div class="graph" id="revenue-graph">
        </div>
	<br>
        <div class="graph" id="spending-graph">
        </div>
	<br>
        <div class="graph" id="debt-graph">
        </div>

        <script>

        var colors = [ "steelblue", "DarkSalmon" ];

         var makeBars = function(graph_id, info, text) {

             var graph_div = d3.select(graph_id);

             graph_div.selectAll("div")
                      .data(info)
                      .enter()
                      .append("div")
                      .style("width", function(d) {
			  return d / 2 + "px";
                      })
                      .style("background-color", function(d,i) {
                        return colors[i];
                      })
                      .text( function(d, i) {
			  return text[i];
                      });
         };

         var transitionTest = function(graph_id, info, scale) {

	     var graph_div = d3.select(graph_id);

	     graph_div.selectAll("div")
		      .data(info)
		      .transition()
		      .duration(4000)
		      .style("width", function(d) {
			  return d / 2 * scale + "px";
                      });
         };

	 var deficit_info = [1040, 552];
   var text = [ "$1040 billion", "$552 billion" ];
   makeBars("#deficit-graph", deficit_info, text);
   transitionTest("#deficit-graph", deficit_info, 2);

	 var gdp_info = [153, 165];
   var text = [ "$15.3 trillion", "$16.5 trillion" ];
	 makeBars("#gdp-graph", gdp_info, text);
	 transitionTest("#gdp-graph", gdp_info, 2);

	 var revenue_info = [234, 299];
   var text = [ "$2.34 trillion", "$2.99 trillion" ];
	 makeBars("#revenue-graph", revenue_info, text);
	 transitionTest("#revenue-graph", revenue_info, 2);

	 var spending_info = [337, 354];
   var text = [ "$3.37 trillion", "$3.54 trillion" ];
	 makeBars("#spending-graph", spending_info, text);
	 transitionTest("#spending-graph", spending_info, 2);

	 var debt_info = [153, 174];
   var text = [ "$15.3 trillion", "$17.4 trillion" ];
	 makeBars("#debt-graph", debt_info, text);
	 transitionTest("#debt-graph", debt_info, 2);

        </script>

    </body>
</html>
